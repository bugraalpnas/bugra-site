<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posts | Bugra Alp Nas</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="logo-area">
                <a href="/" style="text-decoration: none; color: inherit;">
                    <span class="logo">Bugra Alp Nas</span>
                </a>
                <div class="social-icons">
                    <a href="https://x.com/bugra_maker" target="_blank" aria-label="Twitter">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.84 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z" />
                        </svg>
                    </a>
                    <a href="https://github.com/bugraalpnas" target="_blank" aria-label="GitHub">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.339 3-.404 1.02.065 2.04.137 3 .404 2.295-1.552 3.3-1.23 3.3-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.43.372.82 1.102.82 2.222 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/in/bugraalpnas/" target="_blank" aria-label="LinkedIn">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                        </svg>
                    </a>
                    <a href="mailto:bugraalpnas@gmail.com" aria-label="Email">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                        </svg>
                    </a>
                </div>
            </div>
            <nav class="nav-links">
                <a href="/posts.html" class="active">posts</a>
                <a href="/resume.html">resume</a>
                <a href="#">research</a>
                <a href="/projects.html">projects</a>
                <a href="#">talks</a>
                <a href="/documents.html">documents</a>
            </nav>
        </header>

        <main>
            <section class="posts-section">
                <h1>Posts</h1>

                <div class="posts-controls">
                    <input type="text" placeholder="Search..." class="search-bar">
                    <div class="lang-filters">
                        <button class="filter-btn active" data-lang="en">EN</button>
                        <button class="filter-btn" data-lang="tr">TR</button>
                    </div>
                </div>

                <div class="posts-list" id="posts-container">
                    <!-- Posts will be injected here -->
                    <div class="post-item">
                        <span class="post-date">2025-12-22</span>
                        <div class="post-content">
                            <h2 class="post-title"><span class="post-hash">#</span> Test, don't (just) verify</h2>
                            <div class="post-meta">
                                <span class="badge badge-blue">en</span>
                                <span class="post-tags">[software engineering, testing, formal methods]</span>
                            </div>
                            <span class="read-time">13 min read</span>
                        </div>
                    </div>

                    <div class="post-item">
                        <span class="post-date">2025-12-18</span>
                        <div class="post-content">
                            <h2 class="post-title"><span class="post-hash">#</span> Formal Metotlar ve Kanıtlı
                                Programlama Hakkında</h2>
                            <div class="post-meta">
                                <span class="badge badge-red">tr</span>
                                <span class="post-tags">[software engineering, formal methods]</span>
                            </div>
                            <span class="read-time">16 min read</span>
                        </div>
                    </div>

                    <div class="post-item">
                        <span class="post-date">2025-11-22</span>
                        <div class="post-content">
                            <h2 class="post-title"><span class="post-hash">#</span> Temporal Shrinking</h2>
                            <div class="post-meta">
                                <span class="badge badge-blue">en</span>
                                <span class="post-tags">[software engineering, testing]</span>
                            </div>
                            <span class="read-time">10 min read</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- For a real implementation, we'd add a script to parse markdown/JSON -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const container = document.getElementById('posts-container');
            const searchBar = document.querySelector('.search-bar');
            const filterBtns = document.querySelectorAll('.filter-btn');

            let allPosts = [];

            // Fetch posts
            try {
                // Try multiple potential paths for posts.json
                const paths = ['/posts.json', '/public/posts.json', './posts.json', './public/posts.json'];
                let response;

                for (const path of paths) {
                    try {
                        const res = await fetch(path);
                        if (res.ok) {
                            response = res;
                            console.log('Successfully loaded posts from:', path);
                            break;
                        }
                    } catch (e) {
                        continue;
                    }
                }

                if (response && response.ok) {
                    allPosts = await response.json();
                    renderPosts(allPosts);
                } else {
                    console.error('Failed to load posts from any of the standard paths.');
                    container.innerHTML = `
                        <div style="padding: 2rem; border: 1px dashed #666; border-radius: 8px; margin-top: 1rem;">
                            <p><strong>Status:</strong> No posts found or failed to load.</p>
                            <p style="font-size: 0.9em; color: #888; margin-top: 0.5em;">
                                If you just added a post via Decap CMS, please run <code>node generate-posts.js</code> 
                                and refresh this page.
                            </p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error fetching posts:', error);
            }

            function renderPosts(posts) {
                container.innerHTML = '';
                posts.forEach(post => {
                    const postEl = document.createElement('div');
                    postEl.className = 'post-item';

                    // Format date
                    const date = new Date(post.date).toISOString().split('T')[0];

                    // Handle tags
                    const tagsStr = Array.isArray(post.tags) ? post.tags.join(', ') : post.tags;

                    // Badge color
                    const badgeClass = post.lang === 'tr' ? 'badge-red' : 'badge-blue';

                    postEl.innerHTML = `
                        <span class="post-date">${date}</span>
                        <div class="post-content">
                            <h2 class="post-title">
                                <span class="post-hash">#</span> 
                                <a href="/post.html?slug=${post.slug}" style="text-decoration: none; color: inherit;">${post.title}</a>
                            </h2>
                            <div class="post-meta">
                                <span class="badge ${badgeClass}">${post.lang || 'en'}</span>
                                <span class="post-tags">[${tagsStr}]</span>
                            </div>
                            <span class="read-time">${post.readTime || 5} min read</span>
                        </div>
                    `;
                    container.appendChild(postEl);
                });
            }

            // Search logic
            searchBar.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase();
                const filtered = allPosts.filter(post =>
                    post.title.toLowerCase().includes(term)
                );
                renderPosts(filtered);
            });

            // Filter logic
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const lang = btn.dataset.lang;

                    const filtered = allPosts.filter(post => post.lang === lang);
                    renderPosts(filtered);
                });
            });
        });
    </script>
</body>

</html>